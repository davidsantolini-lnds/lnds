<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mission : H√©l√®ne ‚ú® - Run 2</title>

  <style>
    :root{
      --bg0:#050505;
      --pink:#ff6bd6;
      --rose:#ff9a9e;
      --pearl:#fecfef;
      --mint:#75f3c6;
      --shadow:0 30px 90px rgba(0,0,0,.55);
      --soft:0 0 60px rgba(255, 107, 214, .20);
    }

    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      /* On augmente la hauteur pour une descente plus longue et fluide */
      height: 12000px; 
      background:var(--bg0);
      color:#fff;
      font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial;
      overflow-x:hidden;
      /* Important pour √©viter le rebond sur Mac */
      overscroll-behavior-y: none; 
    }

    /* HUD (inchang√©) */
    .hud{
      position:fixed;
      top:14px; left:14px; right:14px;
      z-index:50;
      display:flex; gap:12px; align-items:center;
      pointer-events:none;
    }
    .chip{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.09);
      backdrop-filter: blur(12px);
      box-shadow: 0 15px 50px rgba(0,0,0,.35);
      min-width: 180px;
    }
    .dot{ width:10px;height:10px;border-radius:50%; background:var(--mint); box-shadow:0 0 12px var(--mint); }
    .hud strong{font-size:.92rem;}
    .hud span{font-size:.82rem;color:rgba(255,255,255,.65)}
    .bar{
      flex:1; height:10px; border-radius:999px;
      background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08);
      overflow:hidden;
    }
    .bar > i{
      display:block;height:100%; width:0%;
      background:linear-gradient(90deg, var(--rose), var(--pink), var(--mint));
      box-shadow: var(--soft);
      transition: width 0.1s linear; /* Fluidit√© de la barre */
    }
    .pill{ padding:4px 10px; border-radius:999px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.10); font-size:.78rem; color:rgba(255,255,255,.72); }

    /* Viewport 3D & Ambiance */
    .viewport{
      position:fixed; inset:0;
      perspective:1000px; /* Perspective un peu plus forte */
      overflow:hidden;
      background: radial-gradient(circle at 50% 30%, #1a1025 0%, #000 70%);
    }
    
    /* NOUVELLE NEIGE : 3 couches Parallaxe + Mouvement organique */
    .snow-container {
        position: fixed; inset: 0; pointer-events: none; z-index: 1;
        filter: drop-shadow(0 0 5px white);
    }
    .snow-layer {
        position: absolute; inset: -100% 0 0 0;
        background-repeat: repeat;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        opacity: 0; transition: opacity 2s ease-in;
    }
    body.skiing .snow-layer { opacity: 1; }

    /* Couche lointaine (petite, lente) */
    .snow-far {
        background-image: radial-gradient(circle, rgba(255,255,255,0.8) 1px, transparent 2px);
        background-size: 50px 50px;
        animation-name: snowfall-far;
        animation-duration: 20s;
        opacity: 0.3 !important;
    }
    /* Couche moyenne */
    .snow-mid {
        background-image: radial-gradient(circle, rgba(255,255,255,0.9) 1.5px, transparent 3px);
        background-size: 100px 100px;
        animation-name: snowfall-mid;
        animation-duration: 10s;
        opacity: 0.5 !important;
    }
    /* Couche proche (rapide, grosse, effet vitesse) */
    .snow-near {
        background-image: radial-gradient(circle, #fff 2px, transparent 4px);
        background-size: 150px 150px;
        animation-name: snowfall-near;
        animation-duration: 5s;
        opacity: 0.8 !important;
    }

    /* Animations de neige qui oscillent */
    @keyframes snowfall-far {
        0% { transform: translateY(0) translateX(0); }
        50% { transform: translateY(50%) translateX(20px); }
        100% { transform: translateY(100%) translateX(0); }
    }
    @keyframes snowfall-mid {
        0% { transform: translateY(0) translateX(0); }
        50% { transform: translateY(50%) translateX(-30px); }
        100% { transform: translateY(100%) translateX(0); }
    }
    @keyframes snowfall-near {
        0% { transform: translateY(0) translateX(0); }
        50% { transform: translateY(50%) translateX(40px); }
        100% { transform: translateY(100%) translateX(0); }
    }

    /* Cam√©ra et √âl√©ments 3D */
    .camera{
      position:absolute; inset:0;
      transform-style:preserve-3d;
      will-change:transform;
      /* Le mouvement sera g√©r√© en JS */
    }

    /* Layers & Panels */
    .layer{
      position:absolute; top:50%; left:50%;
      width:min(1100px, 90vw);
      transform-style:preserve-3d;
      /* Point d'origine important pour les rotations */
      transform-origin: center center -500px; 
    }

    .panel{
      position:relative;
      /* L√©g√®re inclinaison vers l'arri√®re pour l'effet de pente */
      transform: rotateX(5deg);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.12);
      border-radius:28px;
      padding:30px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    /* Effet de halo lumineux sur les panels */
    .panel:after {
        content: ""; position: absolute; inset: 0;
        background: radial-gradient(circle at top, rgba(255,255,255,0.15), transparent 70%);
        mix-blend-mode: overlay; pointer-events: none;
    }
   
    /* Typography & Elements */
    .kicker{ display:inline-flex; gap:10px; padding:8px 12px; border-radius:999px; background: rgba(0,0,0,.3); border:1px solid rgba(255,255,255,.15); font-size:.85rem; color:rgba(255,255,255,.8); }
    .kicker b{ color:#fff; font-weight:800; }
    h1{ margin:14px 0 6px; font-size: clamp(2.5rem, 5vw, 4rem); line-height:1.05; text-shadow:0 0 30px rgba(255,107,214,.3); }
    p{ margin:12px 0 0; color: rgba(255,255,255,.8); font-size:1.1rem; line-height:1.6; max-width: 600px; }

    .slope{
      margin-top:24px; border-radius:20px; min-height:240px;
      border:1px solid rgba(255,255,255,.3);
      background: linear-gradient(170deg, rgba(255,255,255,.9) 0%, rgba(210,230,255,.8) 100%);
      position:relative; overflow:hidden;
      box-shadow: 0 20px 50px rgba(0,0,0,.4);
      transform-style: preserve-3d;
    }
    /* Texture de neige sur la piste */
    .slope:before {
        content:""; position:absolute; inset:0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.15'/%3E%3C/svg%3E");
        opacity: 0.6; mix-blend-mode: overlay;
    }

    .gate{
      position:absolute; width:130px; padding:10px; border-radius:10px;
      color:#fff; font-size:.8rem; font-weight:800; text-align:center;
      text-shadow:0 1px 3px rgba(0,0,0,.6);
      box-shadow:0 10px 30px rgba(0,0,0,.3);
      transform: translateZ(20px); /* Les portes ressortent de la piste */
    }
    .gate:before, .gate:after{ content:""; position:absolute; top:-15px; width:6px; height:50px; background:#fff; border-radius:3px; z-index: -1; }
    .gate:before{left:10px; transform: rotate(-5deg);}
    .gate:after{right:10px; transform: rotate(5deg);}
    .gate.red{background:linear-gradient(135deg,#ff4764,#d91a3d);}
    .gate.blue{background:linear-gradient(135deg,#479eff,#1a6dd9);}

    /* Countdown Styles */
    .countdown{ margin-top:20px; display:flex; gap:12px; }
    .timebox{ background: rgba(0,0,0,.3); border:1px solid rgba(255,255,255,.15); border-radius:18px; padding:14px; min-width:110px; text-align: center; }
    .num{ font-size:2rem; font-weight:900; display:block; }
    .lab{ font-size:.75rem; text-transform:uppercase; color:rgba(255,255,255,.5); letter-spacing: 1px;}
    .finishBadge{ display:inline-block; margin-top: 16px; padding: 8px 16px; background: var(--mint); color: var(--bg0); font-weight: 800; border-radius: 99px; box-shadow: 0 0 30px var(--mint);}
  </style>
</head>

<body>

  <div class="hud">
    <div class="chip">
      <i class="dot"></i>
      <div>
        <strong id="hudTitle">D√©part imminent</strong><br/>
        <span id="hudSub">Pousse sur les b√¢tons (scrolle)</span>
      </div>
    </div>
    <div class="bar"><i id="prog"></i></div>
    <div class="chip" style="min-width:auto;">
      <strong id="parisClock">--:--</strong>
      <span class="pill" style="margin-left:10px">LIVE</span>
    </div>
  </div>

  <div class="snow-container">
      <div class="snow-layer snow-far"></div>
      <div class="snow-layer snow-mid"></div>
      <div class="snow-layer snow-near"></div>
  </div>

  <div class="viewport">
    <div class="camera" id="camera">

      <div class="layer" style="transform: translate(-50%,-50%) translateZ(0px);">
        <div class="panel">
          <span class="kicker"><b>STARTHOUSE</b> ¬∑ A-Team Winter mission</span>
          <h1>Dans le portillon de d√©part.</h1>
          <p>Le trac√© est pr√™t. La neige est fra√Æche. Scrolle pour t'√©lancer dans la pente. Sens les carres mordre la neige.</p>
          <div class="slope" style="min-height: 180px; background: linear-gradient(170deg, #eef, #cce);">
             <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); color: #557; font-weight: 800; letter-spacing: 2px;">‚ñº GO ‚ñº</div>
          </div>
        </div>
      </div>

      <div class="layer" style="transform: translate(-50%,-50%) translateZ(-1500px);">
        <div class="panel">
          <span class="kicker"><b>SECTION 1</b> ¬∑ Prise de vitesse</span>
          <h1>√áa acc√©l√®re fort, Amour.</h1>
          <p>Reste flex sur les jambes. Les portes s'encha√Ænent. C'est fluide, c'est nous.</p>
          <div class="slope">
            <div class="gate red" style="top:25px;left:10%;">Focus ‚ù§Ô∏è</div>
            <div class="gate blue" style="top:110px;right:12%;">Trajectoire pure üíô</div>
          </div>
        </div>
      </div>

      <div class="layer" style="transform: translate(-50%,-50%) translateZ(-3000px);">
        <div class="panel">
          <span class="kicker"><b>SECTION 2</b> ¬∑ Le Mur</span>
          <h1>La pente se raidit !</h1>
          <p>On engage le haut du corps. "T'es magnifique sur la piste". Accroche-toi, √ßa secoue un peu.</p>
          <div class="slope">
            <div class="gate blue" style="top:20px;left:25%;">Engage ! üîµ</div>
            <div class="gate red" style="top:90px;right:20%;">A-Team solide üî¥</div>
            <div class="gate blue" style="top:160px;left:35%;">On ne l√¢che rien</div>
          </div>
        </div>
      </div>

      <div class="layer" style="transform: translate(-50%,-50%) translateZ(-4500px);">
        <div class="panel">
          <span class="kicker"><b>SECTION 3</b> ¬∑ Partie de glisse</span>
          <h1>Recherche de vitesse.</h1>
          <p>Position schuss. On laisse filer les skis √† plat. Le vent siffle, la ligne d'arriv√©e approche.</p>
          <div class="slope">
            <div class="gate red" style="top:30px;right:15%;">Tout schuss ‚ú®</div>
            <div class="gate blue" style="top:120px;left:15%;">Vitesse max</div>
          </div>
        </div>
      </div>

      <div class="layer" style="transform: translate(-50%,-50%) translateZ(-6000px);">
        <div class="panel" style="text-align: center;">
          <span class="kicker" style="background: var(--mint); color: var(--bg0);"><b>FINISH LINE</b> ¬∑ Victoire</span>
          <h1>üèÅ Ligne franchie !</h1>
          <p>Quel run ! Maintenant, on r√©cup√®re et on regarde le chrono tourner vers notre moment.</p>
          <div class="finishBadge">Prochaine √©tape : Samedi 20h00</div>
          
          <div class="countdown" id="countdown" style="justify-content: center;">
            <div class="timebox"><span class="num" id="days">00</span><span class="lab">Jours</span></div>
            <div class="timebox"><span class="num" id="hours">00</span><span class="lab">Heures</span></div>
            <div class="timebox"><span class="num" id="minutes">00</span><span class="lab">Min</span></div>
            <div class="timebox"><span class="num" id="seconds">00</span><span class="lab">Sec</span></div>
          </div>
        </div>
      </div>
      
      <div class="layer" style="transform: translate(-50%,-50%) translateZ(-7200px);">
        <div class="panel" style="opacity: 0.6;">
          <h1>...</h1>
        </div>
      </div>

    </div>
  </div>

<script>
/* =========================
   1) MOTEUR DE DESCENTE POV (Cam√©ra embarqu√©e)
========================= */
const camera = document.getElementById('camera');
const prog = document.getElementById('prog');
const hudTitle = document.getElementById('hudTitle');
const hudSub = document.getElementById('hudSub');

let maxScroll = document.body.scrollHeight - window.innerHeight;
// La distance totale du parcours en pixels Z
const totalDistance = 7200; 

window.addEventListener('resize', () => {
  maxScroll = document.body.scrollHeight - window.innerHeight;
});

// On active la neige apr√®s un court d√©lai pour l'effet d'entr√©e
setTimeout(() => document.body.classList.add('skiing'), 500);

window.addEventListener('scroll', () => {
  const scrolled = window.scrollY;
  // Progression de 0 √† 1
  const progress = Math.min(scrolled / maxScroll, 1);
  
  // --- C'EST ICI QUE LA MAGIE POV OP√àRE ---
  
  // 1. Avanc√©e principale (Z)
  const zMove = progress * totalDistance;
  
  // 2. Oscillation lat√©rale (X) - Simule les virages
  // On utilise sin() pour faire des vagues gauche/droite. 
  // 'progress * 15' g√®re la fr√©quence des virages. '120' g√®re l'amplitude en pixels.
  const swayX = Math.sin(progress * 15) * 120;
  
  // 3. Oscillation verticale (Y) - Simule les bosses et le terrain
  // Fr√©quence plus rapide (* 25) mais amplitude plus faible (40px)
  const bobY = Math.cos(progress * 25) * 40;
  
  // 4. Inclinaison de la cam√©ra (Rotation Z) dans les virages
  // Quand on tourne √† gauche, on penche la t√™te √† gauche.
  const tiltZ = Math.cos(progress * 15) * 5; // +/- 5 degr√©s

  // Application de tous les mouvements √† la cam√©ra
  // L'ordre est important : on bouge d'abord, on tourne ensuite.
  camera.style.transform = `translate3d(${swayX}px, ${bobY}px, ${zMove}px) rotateZ(${tiltZ}deg)`;
  
  
  // --- MISE √Ä JOUR DU HUD ---
  prog.style.width = (progress * 100) + '%';
  
  if(progress < 0.05) {
      hudTitle.innerText = "D√©part imminent";
      hudSub.innerText = "Pousse pour t'√©lancer.";
  } else if(progress < 0.3) {
      hudTitle.innerText = "Section 1 : Mise en action";
      hudSub.innerText = "Prends le rythme.";
  } else if(progress < 0.6) {
       hudTitle.innerText = "Section 2 : Le Mur";
       hudSub.innerText = "Accroche-toi, √ßa secoue !";
  } else if (progress < 0.85) {
       hudTitle.innerText = "Section 3 : Glisse";
       hudSub.innerText = "Recherche de vitesse...";
  } else {
       hudTitle.innerText = "üèÅ Arriv√©e !";
       hudSub.innerText = "Bien jou√© la A-Team.";
  }
});

/* =========================
   2) HORLOGE & COMPTE √Ä REBOURS (inchang√©)
========================= */
const parisClock = document.getElementById('parisClock');
const targetDate = new Date('2026-03-01T00:00:00+01:00').getTime();

function updateTime() {
  const now = new Date();
  parisClock.innerText = now.toLocaleTimeString('fr-FR', {timeZone: 'Europe/Paris', hour:'2-digit', minute:'2-digit'});
  
  const diff = targetDate - now.getTime();
  if (diff > 0) {
    document.getElementById('days').innerText = String(Math.floor(diff / (1000 * 60 * 60 * 24))).padStart(2, '0');
    document.getElementById('hours').innerText = String(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
    document.getElementById('minutes').innerText = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
    document.getElementById('seconds').innerText = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');
  }
}
setInterval(updateTime, 1000);
updateTime();
</script>
</body>
</html>
